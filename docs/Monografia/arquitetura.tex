\chapter{SAURON: Arquitetura}\label{subsec:arquitetura}

Conforme mencionado na seção \ref{sec:Objetivo}, o objetivo deste trabalho é construir um robô-guia de baixo-custo, capaz de se localizar e navegar em um ambiente previamente conhecido. Em comparação com a maioria dos trabalhos descritos na seção \ref{chp:revisaoLiteratura}, este projeto difere significativamente na qualidade dos sensores utilizados: oito sonares e uma câmera, sensores ruidosos se comparados a um laser. Já em relação a \cite{barra}, há uma diferença nas propostas dos trabalhos. Enquanto \cite{barra} criou um sistema de localização \textit{off-line}, o SAURON é constituído por um sistema de navegação e localização robótica \textit{on-line}, ou seja, que opera em tempo real, à medida que o robô se movimenta.

A arquitetura geral do sistema possui 5 grandes módulos: interface gráfica, navegação, localização, sensores e motores, como pode ser observado na figura \ref{arquitetura:global}. O módulo de navegação pode ser dividido em planejamento e execução.
 
\begin{figure}[h]%
\begin{center}
\includegraphics[width=.7\columnwidth]{imagens/arquiteturaGeral.pdf}
\caption{Arquitetura do sistema completo, descrevendo as interrelações entre os módulos de localização, navegação e sensores}%
\label{arquitetura:global}%
\end{center}
\end{figure}

A interface gráfica apresenta ao usuário os possíveis destinos do robô e repassa a escolha do usuário ao submódulo de planejamento, dentro do módulo de navegação. A tarefa desse submódulo é calcular a melhor rota entre a postura atual e o destino, considerando a possibilidade do destino estar localizado em um mapa distinto do mapa de origem. Como descrito na seção \ref{subsec:navegacao}, utiliza-se um grafo de nós chamados \textit{waypoints}. Cada waypoint é uma meta intermediária, e um conjunto deles compõe um caminho. O processo de locomoção até o próximo \textit{waypoint} do caminho é coordenado pelo submódulo de execução, que é responsável por controlar os motores, monitorar o correto cumprimento da rota, e verificar as leituras dos sonares, de modo a detectar obstáculos dinâmicos e impedir colisões. No caso de navegação intermapas são traçados destinos intermediários que, uma vez alcançados serão usados para a troca de mapas.

A estimativa da postura atual do robô, composta pelas coordenadas $x$, $y$ e $\theta$, é realizada pelo módulo de localização, que se vale dos dados dos sensores, dos modelos de como eles funcionam, e do conhecimento do ambiente. Os sensores podem ser internos ou externos. Um sensor interno fornece características intrínsecas ao sistema, e.g., odômetro, enquanto que sensores externos fornecem dados sobre o ambiente no qual o robô está inserido, e.g., sonar. 

O módulo de localização desenvolvido utiliza uma planta geométrica e um mapa de marcos visuais, previamente fornecidos. A arquitetura do módulo de localização é descrita na seção \ref{subsec:arqloc}.

Finalmente, o módulo de sensores é composto por sonares, odômetro e uma câmera, que fornecem as informações necessárias para que o módulo de localização prediga e corrija a postura.

\input{localizacao}
\input{planejamento}